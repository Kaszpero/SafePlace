<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafePlace - Bezpieczna Spo≈Çeczno≈õƒá</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="app-container">
        <div class="header">
            <h1>SafePlace</h1>
            <p>Bezpieczna spo≈Çeczno≈õƒá - zg≈Çaszaj i monitoruj zagro≈ºenia w Twojej okolicy</p>
        </div>

        <div class="main-content">
            <div class="filter-panel">
                <div class="panel-section">
                    <h3>Wyszukaj zg≈Çoszenia</h3>
                    <div class="search-container">
                        <input type="text" id="search-input" class="search-input" placeholder="Szukaj w opisie zg≈Çosze≈Ñ...">
                    </div>
                </div>

                <div class="panel-section">
                    <h3>Rodzaj zagro≈ºenia</h3>
                    <div class="filter-options">
                        <label class="filter-option">
                            <input type="checkbox" checked data-type="crime">
                            <span>Przestƒôpczo≈õƒá</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" checked data-type="accident">
                            <span>Wypadki</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" checked data-type="nature">
                            <span>Zagro≈ºenia naturalne</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" checked data-type="infrastructure">
                            <span>Infrastruktura</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" checked data-type="health">
                            <span>Zdrowotne</span>
                        </label>
                        <label class="filter-option">
                            <input type="checkbox" checked data-type="other">
                            <span>Inne</span>
                        </label>
                    </div>
                </div>

                <div class="panel-section">
                    <h3>Skala zagro≈ºenia</h3>
                    <div class="threat-levels">
                        <button class="level-btn level-1 active" data-level="1">1</button>
                        <button class="level-btn level-2 active" data-level="2">2</button>
                        <button class="level-btn level-3 active" data-level="3">3</button>
                        <button class="level-btn level-4 active" data-level="4">4</button>
                        <button class="level-btn level-5 active" data-level="5">5</button>
                        <button class="level-btn level-6 active" data-level="6">6</button>
                        <button class="level-btn level-7 active" data-level="7">7</button>
                        <button class="level-btn level-8 active" data-level="8">8</button>
                        <button class="level-btn level-9 active" data-level="9">9</button>
                        <button class="level-btn level-10 active" data-level="10">10</button>
                    </div>
                </div>

                <div class="panel-section">
                    <h3>Status g≈Ços√≥w</h3>
                    <div class="filter-options">
                        <label class="filter-option">
                            <input type="radio" name="voteStatus" value="all" checked>
                            <span>Wszystkie</span>
                        </label>
                        <label class="filter-option">
                            <input type="radio" name="voteStatus" value="mostlyResolved">
                            <span>G≈Ç√≥wnie rozwiƒÖzane</span>
                        </label>
                        <label class="filter-option">
                            <input type="radio" name="voteStatus" value="mostlyNotResolved">
                            <span>G≈Ç√≥wnie nierozwiƒÖzane</span>
                        </label>
                    </div>
                </div>

                <div class="stats">
                    <h3>Statystyki</h3>
                    <div class="stat-item">
                        <span>Wszystkie zg≈Çoszenia:</span>
                        <span class="stat-value" id="total-count">0</span>
                    </div>
                    <div class="stat-item">
                        <span>Wszystkie g≈Çosy:</span>
                        <span class="stat-value" id="total-votes">0</span>
                    </div>
                    <div class="stat-item">
                        <span>Dzisiaj:</span>
                        <span class="stat-value" id="today-count">0</span>
                    </div>
                </div>

                <button class="btn btn-primary" id="apply-filters">Zastosuj filtry</button>
                <button class="btn btn-secondary" id="clear-filters">Wyczy≈õƒá filtry</button>
                <button class="btn btn-success" id="show-reports-btn">Poka≈º listƒô zg≈Çosze≈Ñ</button>
                <button class="btn btn-info" id="help-btn">Jak u≈ºywaƒá?</button>
            </div>

            <div class="map-container">
                <div id="map"></div>

                <div class="form-container" id="report-form">
                    <div class="form-header">
                        <h2>Zg≈Ço≈õ zagro≈ºenie</h2>
                    </div>
                    <form id="threat-report">
                        <div class="form-group">
                            <label for="threat-type">Rodzaj zagro≈ºenia *</label>
                            <select id="threat-type" required>
                                <option value="">Wybierz rodzaj</option>
                                <option value="crime">Przestƒôpczo≈õƒá</option>
                                <option value="accident">Wypadek</option>
                                <option value="nature">Zagro≈ºenie naturalne</option>
                                <option value="infrastructure">Uszkodzona infrastruktura</option>
                                <option value="health">Zagro≈ºenie zdrowotne</option>
                                <option value="other">Inne</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label>Skala zagro≈ºenia: <span id="current-level">5</span>/10 *</label>
                            <input type="range" id="threat-level" class="level-slider" min="1" max="10" value="5" required>
                            <div class="level-display">
                                <span>1 (niskie)</span>
                                <span>10 (krytyczne)</span>
                            </div>
                            <!-- KOLOROWY PASEK POZIOMU ZAGRO≈ªENIA -->
                            <div class="threat-level-indicator">
                                <div class="level-bar">
                                    <div class="level-fill" id="level-fill"></div>
                                </div>
                                <div class="level-labels">
                                    <span>Niskie</span>
                                    <span>≈örednie</span>
                                    <span>Wysokie</span>
                                    <span>Krytyczne</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-group">
                            <label for="threat-description">Opis zagro≈ºenia *</label>
                            <textarea id="threat-description" placeholder="Opisz szczeg√≥≈Çy zagro≈ºenia..." required></textarea>
                        </div>

                        <div class="form-buttons">
                            <button type="button" class="btn btn-secondary" id="cancel-report">Anuluj</button>
                            <button type="submit" class="btn btn-primary">Zg≈Ço≈õ</button>
                        </div>
                    </form>
                </div>

                <div class="reports-sidebar" id="reports-sidebar">
                    <div class="reports-header">
                        <h3>Lista zg≈Çosze≈Ñ</h3>
                        <button class="close-reports" id="close-reports">√ó</button>
                    </div>
                    <div class="reports-tabs">
                        <button class="tab-btn active" data-tab="active">Wszystkie</button>
                        <button class="tab-btn" data-tab="voted">Moje g≈Çosy</button>
                    </div>
                    <div class="reports-content">
                        <div class="tab-content active" id="active-tab">
                            <div id="active-reports-list"></div>
                        </div>
                        <div class="tab-content" id="voted-tab">
                            <div id="voted-reports-list"></div>
                        </div>
                    </div>
                </div>

                <!-- MODAL POMOCY -->
                <div class="help-modal" id="help-modal">
                    <div class="help-content">
                        <div class="help-header">
                            <h2>Jak u≈ºywaƒá SafePlace? üìö</h2>
                            <button class="close-help" id="close-help">√ó</button>
                        </div>
                        <div class="help-body">
                            <div class="help-section">
                                <h3>üó∫Ô∏è Podstawowe funkcje</h3>
                                <ul>
                                    <li><strong>Kliknij na mapƒô</strong> - aby dodaƒá nowe zg≈Çoszenie zagro≈ºenia</li>
                                    <li><strong>Kliknij znacznik</strong> - aby zobaczyƒá szczeg√≥≈Çy i zag≈Çosowaƒá</li>
                                    <li><strong>U≈ºyj filtr√≥w</strong> - aby przeglƒÖdaƒá wybrane typy zagro≈ºe≈Ñ</li>
                                </ul>
                            </div>

                            <div class="help-section">
                                <h3>‚ö†Ô∏è Zg≈Çaszanie zagro≈ºe≈Ñ</h3>
                                <ul>
                                    <li><strong>Rodzaj zagro≈ºenia</strong> - wybierz kategoriƒô problemu</li>
                                    <li><strong>Skala zagro≈ºenia</strong> - od 1 (niskie) do 10 (krytyczne)</li>
                                    <li><strong>Opis</strong> - szczeg√≥≈Çowo opisz sytuacjƒô</li>
                                </ul>
                                <div class="level-guide">
                                    <h4>Skala zagro≈ºenia:</h4>
                                    <div class="guide-item">
                                        <span class="guide-color" style="background: #27ae60;"></span>
                                        <span><strong>1-2:</strong> Niskie - drobne utrudnienia</span>
                                    </div>
                                    <div class="guide-item">
                                        <span class="guide-color" style="background: #f1c40f;"></span>
                                        <span><strong>3-4:</strong> Umiarkowane - wymaga uwagi</span>
                                    </div>
                                    <div class="guide-item">
                                        <span class="guide-color" style="background: #e67e22;"></span>
                                        <span><strong>5-6:</strong> ≈örednie - powa≈ºne zagro≈ºenie</span>
                                    </div>
                                    <div class="guide-item">
                                        <span class="guide-color" style="background: #e74c3c;"></span>
                                        <span><strong>7-8:</strong> Wysokie - pilna interwencja</span>
                                    </div>
                                    <div class="guide-item">
                                        <span class="guide-color" style="background: #8e44ad;"></span>
                                        <span><strong>9-10:</strong> Krytyczne - bezpo≈õrednie niebezpiecze≈Ñstwo</span>
                                    </div>
                                </div>
                            </div>

                            <div class="help-section">
                                <h3>üó≥Ô∏è System g≈Çosowania</h3>
                                <ul>
                                    <li><strong>üëç RozwiƒÖzane</strong> - zag≈Çosuj je≈õli problem zosta≈Ç naprawiony</li>
                                    <li><strong>üëé NierozwiƒÖzane</strong> - zag≈Çosuj je≈õli problem nadal istnieje</li>
                                    <li><strong>Procentowe wskazanie</strong> - pokazuje opiniƒô spo≈Çeczno≈õci</li>
                                    <li>Ka≈ºdy u≈ºytkownik mo≈ºe zag≈Çosowaƒá tylko raz na zg≈Çoszenie</li>
                                </ul>
                            </div>

                            <div class="help-section">
                                <h3>üîç Filtrowanie</h3>
                                <ul>
                                    <li><strong>Rodzaj zagro≈ºenia</strong> - poka≈º/ukryj kategorie</li>
                                    <li><strong>Skala zagro≈ºenia</strong> - wybierz poziomy do wy≈õwietlenia</li>
                                    <li><strong>Status g≈Ços√≥w</strong> - filtruj wed≈Çug opinii spo≈Çeczno≈õci</li>
                                    <li><strong>Wyszukiwanie</strong> - znajd≈∫ zg≈Çoszenia po opisie</li>
                                </ul>
                            </div>

                            <div class="help-section">
                                <h3>üìä Statystyki</h3>
                                <ul>
                                    <li><strong>Wszystkie zg≈Çoszenia</strong> - ca≈Çkowita liczba</li>
                                    <li><strong>Wszystkie g≈Çosy</strong> - suma wszystkich oddanych g≈Ços√≥w</li>
                                    <li><strong>Dzisiaj</strong> - zg≈Çoszenia dodane dzisiaj</li>
                                </ul>
                            </div>
                        </div>
                        <div class="help-footer">
                            <button class="btn btn-primary" id="close-help-btn">Rozumiem!</button>
                        </div>
                    </div>
                </div>

                <div class="legend">
                    <h4>Legenda zagro≈ºe≈Ñ</h4>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #27ae60;"></div>
                        <span>Niskie (1-2)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #f1c40f;"></div>
                        <span>Umiarkowane (3-4)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #e67e22;"></div>
                        <span>≈örednie (5-6)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #e74c3c;"></div>
                        <span>Wysokie (7-8)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #8e44ad;"></div>
                        <span>Krytyczne (9-10)</span>
                    </div>
                </div>

                <button class="show-reports-btn" id="show-reports-btn-sidebar">
                    Lista zg≈Çosze≈Ñ
                </button>

                <button class="help-floating-btn" id="help-floating-btn">
                    ‚ùì Pomoc
                </button>
            </div>
        </div>
    </div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script src="js/map.js"></script>
    <script src="js/threats.js"></script>
    <script src="js/app.js"></script>
</body>
</html>